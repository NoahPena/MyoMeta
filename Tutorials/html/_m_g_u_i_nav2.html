<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Writing a MetaAppObject nav script</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MetaSDKDocsLogo.fw.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Guides</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_m_g_u_i_nav2.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Writing a MetaAppObject nav script </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Writing a MetaAppObject nav script</h1>
<p>Advanced navigation with states</p>
<h2>Overview</h2>
<p>This guide will show you how to use an object controller script to keep track of the current navigational state of your App.</p>
<p>By the end of this guide, you will be able to:</p><ul>
<li>Add an object controller script to your App object</li>
<li>Keep track of the current navigational state of your App</li>
</ul>
<h2>Requirements</h2>
<ul>
<li><a href="http://unity3d.com/unity/download/archive">Unity for Windows</a></li>
<li>Meta SDK Installer</li>
<li>One pair of Meta glasses</li>
</ul>
<p>This tutorial also assumes that you have already completed the following:</p><ul>
<li><a class="el" href="_m_g_u_i_nav1.html">Designing MGUI navigation</a></li>
</ul>
<h2>Steps</h2>
<h3>Setting up</h3>
<ol type="1">
<li><b>Plug in</b> and set up your Meta glasses</li>
<li><b>Run</b> Unity</li>
<li><b>Open</b> the 'Meta' project</li>
<li><b>Open</b> your 'Hello MetaWorld' scene</li>
</ol>
<h3>Adding a controller script to MGUI Nav App</h3>
<ol type="1">
<li><b>Select</b> your 'MGUI Nav App' GameObject</li>
<li><b>Add</b> a new C# script called 'MyNavController' to 'MGUI Nav App' GameObject<ol type="a">
<li><b>Click</b> <em>Add Component</em> at the bottom of the Inspector window</li>
<li><b>Select</b> <em>New Script &gt;</em></li>
<li><b>Type in</b> 'MyNavController' with language 'CSharp' and <b>click 'Create and Add'</b></li>
</ol>
</li>
<li><b>Open</b> 'MyNavController' for editing by double-clicking the 'MyNavController' Script property in the Inspector window</li>
<li><b>Add</b> a <code>NavigationState</code> enum to keep track of where we are in the navigation hierarchy<ol type="a">
<li><b>Add</b> the following lines inside the <code>MyNavController</code> class above the <code>Start ()</code> function: <div class="fragment"> public enum NavigationState<br />
 {<br />
 &#160;&#160;&#160;&#160;Main = 0,<br />
 &#160;&#160;&#160;&#160;Second = 1<br />
 }<br />
 public NavigationState currentState = NavigationState.Main; </div></li>
</ol>
</li>
<li><b>Add</b> a <code>SetState()</code> method to set the <code>currentState</code> based on the first parameter<ol type="a">
<li><b>Add</b> the following lines inside the <code>MyNavController</code> class above the <code>Start ()</code> function: <div class="fragment"> public void SetState(NavigationState state = NavigationState.Main)<br />
 {<br />
 &#160;&#160;&#160;&#160;currentState = state;<br />
 } </div></li>
</ol>
</li>
<li><b>Save</b> your changes to the script</li>
</ol>
<div class="image">
<img src="MGUINav2AppObjectScreenshot.png" alt="MGUINav2AppObjectScreenshot.png"/>
<div class="caption">
MGUI Nav App with the MyNavController script</div></div>
 <h3>Method 1: Creating a trigger script and adding it to MGUI.Panel 1 and 2</h3>
<ul>
<li>This triggers the state change when the panel is activated</li>
</ul>
<ol type="1">
<li><b>Select</b> the 'MGUI.Panel 1' GameObject<ol type="a">
<li><b>Expand</b> the 'MGUI Nav App' and 'MGUI.Canvas' GameObjects in the Hierarchy window by clicking the triangles next to the name of each GameObject</li>
<li><b>Select</b> the 'MGUI.Panel 1' GameObject</li>
</ol>
</li>
<li><b>Add</b> a new C# script called 'MyNavTrigger' to 'MGUI.Panel 1'<ol type="a">
<li><b>Click</b> <em>Add Component</em> at the bottom of the Inspector window</li>
<li><b>Select</b> <em>New Script &gt;</em></li>
<li><b>Type in</b> 'MyNavTrigger' with language 'CSharp' and <b>click 'Create and Add'</b></li>
</ol>
</li>
<li><b>Add</b> a <code>MyNavController</code> script variable to send the command to and a <code>MyNavController.NavigationState</code> enum veriable to send the new navigation state<ol type="a">
<li><b>Add</b> the following lines inside the <code>MyNavTrigger</code> class above the <code>Start ()</code> function: <div class="fragment"> public MyNavController navControllerScript;<br />
 public MyNavController.NavigationState navState; </div></li>
</ol>
</li>
<li><b>Add</b> an <code>OnEnable()</code> method to call the <code>SetState()</code> method of 'navControllerScript' when the object is activated<ol type="a">
<li><b>Add</b> the following lines inside the <code>MyNavTrigger</code> class above the <code>Start ()</code> function: <div class="fragment"> void OnEnable()<br />
 {<br />
 &#160;&#160;&#160;&#160;navControllerScript.SetState(navState);<br />
 } </div></li>
</ol>
</li>
<li><b>Save</b> your changes to the script</li>
<li><b>Select</b> 'Main' in the 'Nav State' drop down of 'My Nav Trigger (Script)' in the Inspector window</li>
<li><b>Click and drag</b> the 'MGUI Nav App' GameObject from the Hierarchy window to the 'Nav Controller Script' property of 'MGUI.Panel 1' in the Inspector window<ol type="a">
<li><b>Select</b> the 'MGUI.Panel 1' GameObject</li>
<li><b>Scroll down</b> in the Inspector window until you see the 'My Nav Trigger (Script)'</li>
<li><b>Click and drag</b> the 'MGUI Nav App' GameObject from the Hierarchy window to the 'None (My Nav Controller)' box in the Inspector window <div class="image">
<img src="MGUINav2MyNavTriggerScreenshot.png" alt="MGUINav2MyNavTriggerScreenshot.png"/>
<div class="caption">
MGUI.Panel 1 with the MyNavTrigger script</div></div>
</li>
</ol>
</li>
<li><b>Add</b> the <code>MyNavTrigger</code> script to 'MGUI.Panel 2'<ol type="a">
<li><b>Select</b> the 'MGUI.Panel 2' GameObject</li>
<li><b>Click</b> <em>Add Component</em> at the bottom of the Inspector window</li>
<li><b>Type in</b> <code>MyNavTrigger</code> and select it from the search results</li>
</ol>
</li>
<li><b>Click and drag</b> the 'MGUI Nav App' GameObject from the Hierarchy window to the 'Nav Controller Script' property of 'MGUI.Panel 2' in the Inspector window</li>
<li><b>Select</b> 'Second' in the 'Nav State' drop down of 'My Nav Trigger (Script)' in the Inspector window</li>
<li><b>Save</b> the scene</li>
</ol>
<div class="image">
<img src="MGUINav2MGUIPanel2Screenshot.png" alt="MGUINav2MGUIPanel2Screenshot.png"/>
<div class="caption">
MGUI.Panel 2 with the MyNavTrigger script</div></div>
 <h3>Method 2: Adding an On Click () trigger to MGUI.Button Nav</h3>
<ul>
<li>This triggers the state change when the 'Switch Panel' button is pressed</li>
</ul>
<ol type="1">
<li><b>Add</b> a <code>SetStateInt()</code> method to set the <code>currentState</code> based on the first parameter (an integer)<ol type="a">
<li><b>Add</b> the following lines inside the <code>MyNavController</code> class above the <code>Start ()</code> function: <div class="fragment"> public void SetStateInt(int state)<br />
 {<br />
 &#160;&#160;&#160;&#160;currentState = (NavigationState)state;<br />
 } </div></li>
</ol>
</li>
<li><b>Select</b> the 'MGUI.Button Nav' child GameObject of 'MGUI.Panel 1'</li>
<li><b>Add</b> the 'MGUI Nav App' GameObject to the list of <code>On Click ()</code> event targets in the Inspector window of the 'MGUI.Button Nav' GameObject</li>
<li><b>Change</b> the <code>On Click ()</code> event trigger on the 'MGUI.Button Nav' GameObject to call the <code>MyNavController.SetStateInt()</code> function with the parameter <code>1</code><ol type="a">
<li><b>Click</b> the trigger drop-down box ("No Function" by default) next to the 'MGUI Nav App' item in the <code>On Click ()</code> section of the 'MGUI.Button Nav' Inspector window</li>
<li><b>Select</b> MyNavController &gt; SetStateInt (int) in the menu <div class="image">
<img src="MGUINav2MGUIP1ButtonNavScreenshot.png" alt="MGUINav2MGUIP1ButtonNavScreenshot.png"/>
<div class="caption">
Selecting MyNavController.SetStateInt() as the function to call when pressed</div></div>
</li>
<li><b>Type</b> <code>1</code> into the input box next to the 'MGUI Nav App' item in <code>On Click ()</code> <div class="image">
<img src="MGUINav2MGUIP1ButtonNavScreenshot2.png" alt="MGUINav2MGUIP1ButtonNavScreenshot2.png"/>
<div class="caption">
Setting the parameter to 0</div></div>
</li>
</ol>
</li>
<li><b>Select</b> the 'MGUI.Button Nav' child GameObject of 'MGUI.Panel 2'</li>
<li><b>Add</b> the 'MGUI Nav App' GameObject to the list of <code>On Click ()</code> event targets in the Inspector window of the 'MGUI.Button Nav' GameObject</li>
<li><b>Change</b> the <code>On Click ()</code> event trigger on the 'MGUI.Button Nav' GameObject to call the <code>MyNavController.SetStateInt()</code> function with the parameter <code>0</code></li>
<li><b>Save</b> the scene</li>
</ol>
<h3>Observing the change in navigation state</h3>
<ol type="1">
<li><b>Unselect</b> the 'Maximize on Play' option in your Game View<ol type="a">
<li><b>Click</b> on your Game View tab</li>
<li><b>Unselect</b> the 'Maximize on Play' option in the top right of the Game View</li>
</ol>
</li>
<li><b>Select</b> the 'MGUI Nav App' GameObject so that you can see the 'My Nav Controller (Script)' in the Inspector window</li>
<li><b>Click</b> the Play button to <b>run</b> the scene</li>
<li><b>Touch</b> the 'Next Panel' button with your finger <b>OR</b> in monocular mode (F2), <b>click</b> on the 'Next Panel' button with your mouse<ol type="a">
<li>You should notice that the 'Current State' property of your 'My Nav Controller (Script)' changes each time you click on the 'Next Panel' button</li>
</ol>
</li>
</ol>
<div class="image">
<img src="MGUINav2Screenshot.png" alt="MGUINav2Screenshot.png"/>
<div class="caption">
Current State while running the app</div></div>
 <h2>Conclusion</h2>
<p>Now you know how to write a controller script for your App object, and have a trigger script attached to a GameObject talk to that controller script. This can be useful if you want to make various events happen based on the current state of the object.</p>
<p>The two methods for calling the controller are just some examples of how that functionality may be possible. The first has the advantage of not needing to worry about how the panel was activated - it will change the state each time the panel becomes active. The second has the advantage of not needing an extra script to call the controller - however, you will need to remember to call the function with the correct parameter for every point of entry to the panel.</p>
<p>These tutorials only cover some of the functionality that the Meta SDK has to offer. Now you have learned the basics and are ready to go and create some amazing AR applications. Good luck! </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_tutorials.html">Tutorials</a></li>
    <li class="footer">Generated on Thu Dec 18 2014 17:35:36 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
